# Example for the serialization of a campaign

This example shows how to serialize and also de-serialize a campaign.
It demonstrates and shows that the "original" and "new" objects behave the same.

This example assumes some basic familiarity with using BayBE.
We thus refer to [`campaign`](./../Basics/campaign.md) for a basic example.

## Necessary imports


```python
import numpy as np
```


```python
from baybe import Campaign
from baybe.objectives import SingleTargetObjective
from baybe.parameters import (
    CategoricalParameter,
    NumericalDiscreteParameter,
)
from baybe.recommenders import (
    BotorchRecommender,
    FPSRecommender,
    TwoPhaseMetaRecommender,
)
from baybe.searchspace import SearchSpace
from baybe.targets import NumericalTarget
```

## Experiment setup


```python
parameters = [
    CategoricalParameter(
        name="Granularity",
        values=["coarse", "medium", "fine"],
        encoding="OHE",
    ),
    NumericalDiscreteParameter(
        name="Pressure[bar]",
        values=[1, 5, 10],
        tolerance=0.2,
    ),
    NumericalDiscreteParameter(
        name="Temperature[degree_C]",
        values=np.linspace(100, 200, 10),
    ),
]
```

## Creating the campaign


```python
campaign = Campaign(
    searchspace=SearchSpace.from_product(parameters=parameters, constraints=None),
    objective=SingleTargetObjective(target=NumericalTarget(name="Yield")),
    recommender=TwoPhaseMetaRecommender(
        recommender=BotorchRecommender(),
        initial_recommender=FPSRecommender(),
    ),
)
```

## Serialization and de-serialization

We begin by printing the original campaign


```python
print("Original object")
print(campaign, end="\n" * 3)
```

We next serialize the campaign to JSON.
This yields a JSON representation in string format.
Since it is rather complex, we do not print this string here.
Note: Dataframes are binary-encoded and are hence not human-readable.


```python
string = campaign.to_json()
```

Deserialize the JSON string back to an object.


```python
print("Deserialized object")
campaign_recreate = Campaign.from_json(string)
print(campaign_recreate, end="\n" * 3)
```

Verify that both objects are equal.


```python
assert campaign == campaign_recreate
print("Passed basic assertion check!")
```

## Comparing recommendations in both objects

To further show how serialization affects working with campaigns, we will now
create and compare some recommendations in both campaigns.


```python
recommendation_orig = campaign.recommend(batch_size=2)
recommendation_recreate = campaign_recreate.recommend(batch_size=2)
```


```python
print("Recommendation from original object:")
print(recommendation_orig)
```


```python
print("Recommendation from recreated object:")
print(recommendation_recreate)
```
